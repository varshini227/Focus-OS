<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Focus OS">
    <link rel="apple-touch-icon" href="https://i.ibb.co/v4S8T5C/focus-os-icon.png">
    <meta name="theme-color" content="#050506">
    
    <title>Focus OS | APK Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&family=JetBrains+Mono&display=swap');

        :root {
            --bg: #050506;
            --card-bg: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.08);
            --text-pure: #ffffff;
            --text-dim: rgba(255, 255, 255, 0.5);
            --leetcode-orange: #ffa116;
            --lc-green: #00af9b;
            --warning-red: #ff4d71;
        }

        body {
            background-color: var(--bg); color: var(--text-pure);
            font-family: 'Inter', sans-serif; display: flex;
            flex-direction: column; align-items: center; 
            min-height: 100vh; margin: 0; padding: 20px;
            overflow-x: hidden;
        }

        /* CRT/Scanline App Effect */
        body::after {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 4px; z-index: 1000; pointer-events: none;
        }

        #clock { font-size: 3.5rem; font-weight: 200; margin: 10px 0; letter-spacing: -2px; }
        #date { color: var(--leetcode-orange); letter-spacing: 3px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; margin-bottom: 20px; }

        .dashboard-grid {
            display: grid; grid-template-columns: 1fr;
            gap: 15px; width: 100%; max-width: 450px; margin-top: 10px;
            transition: all 0.5s ease;
        }

        .card {
            background: var(--card-bg); border: 1px solid var(--border);
            padding: 22px; border-radius: 24px; backdrop-filter: blur(15px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        /* POMODORO UI */
        #timer-display { font-size: 4.5rem; font-weight: 800; font-family: 'JetBrains Mono'; margin: 5px 0; text-align: center; }
        .t-btn-group { display: flex; gap: 10px; margin-bottom: 15px; }
        .t-btn { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: #fff; padding: 12px; border-radius: 12px; font-weight: 600; cursor: pointer; }
        .t-btn.active { background: var(--leetcode-orange); color: #000; }

        /* STATS */
        .stat-val { font-size: 3.5rem; font-weight: 900; color: var(--leetcode-orange); line-height: 1; text-align: center; margin: 10px 0; }
        .stat-grid { display: flex; justify-content: space-around; margin-top: 15px; border-top: 1px solid var(--border); padding-top: 15px; }
        .stat-item { text-align: center; }
        .stat-item b { font-size: 1.1rem; display: block; }
        .stat-item small { font-size: 0.6rem; color: var(--text-dim); letter-spacing: 1px; }

        /* BUTTONS */
        button.primary { background: var(--leetcode-orange); color: #000; border: none; padding: 18px; border-radius: 16px; font-weight: 800; width: 100%; font-size: 1rem; cursor: pointer; }
        .btn-outline { background: transparent; border: 1px solid var(--border); color: var(--leetcode-orange); padding: 10px; border-radius: 12px; margin-top: 10px; width: 100%; font-size: 0.7rem; font-weight: 700; cursor: pointer; }

        /* OBJECTIVES */
        .task-input-group { display: flex; gap: 10px; margin-bottom: 15px; }
        .task-input-group input { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 12px; padding: 12px; color: #fff; outline: none; }
        .todo-list { list-style: none; padding: 0; margin: 0; text-align: left; max-height: 150px; overflow-y: auto; }
        .todo-item { display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .todo-item input { width: 22px; height: 22px; accent-color: var(--lc-green); }
        .done { text-decoration: line-through; opacity: 0.3; }

        /* ZEN MODE (Focus Mode) */
        .zen-mode .distraction { opacity: 0; pointer-events: none; transform: scale(0.9); position: absolute; }
        .zen-mode .card.timer-card { transform: translateY(60px) scale(1.05); border-color: var(--leetcode-orange); box-shadow: 0 0 30px rgba(255, 161, 22, 0.2); }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="clock">00:00:00</div>
    <div id="date">COMMANDER VARSHINI</div>

    <div id="dashboard" class="dashboard-grid">
        <div class="card distraction">
            <small style="letter-spacing: 2px; opacity: 0.5;">LIVE MISSION DATA</small>
            <div id="total-solved" class="stat-val">...</div>
            <div class="stat-grid">
                <div class="stat-item"><b id="easy-count" style="color: var(--lc-green);">0</b><small>EASY</small></div>
                <div class="stat-item"><b id="med-count" style="color: var(--leetcode-orange);">0</b><small>MEDIUM</small></div>
                <div class="stat-item"><b id="hard-count" style="color: var(--warning-red);">0</b><small>HARD</small></div>
            </div>
            <button class="btn-outline" onclick="initDashboard()">REFRESH API</button>
        </div>

        <div class="card timer-card">
            <div class="t-btn-group">
                <button class="t-btn active" onclick="setTimer(25, this)">FOCUS</button>
                <button class="t-btn" onclick="setTimer(5, this)">REST</button>
            </div>
            <div id="timer-display">25:00</div>
            <button class="primary" onclick="toggleTimer()" id="start-btn">START SESSION</button>
        </div>

        <div class="card distraction">
            <small style="letter-spacing: 2px; opacity: 0.5; display: block; margin-bottom: 10px;">MISSION OBJECTIVES</small>
            <div class="task-input-group">
                <input type="text" id="todo-input" placeholder="New task..." onkeypress="if(event.key === 'Enter') addTodo()">
                <button style="width: 50px; background: #fff; color: #000; border-radius: 12px; font-weight: 900;" onclick="addTodo()">+</button>
            </div>
            <div id="todo-list" class="todo-list"></div>
            <button class="btn-outline" style="color: var(--warning-red); border-color: var(--warning-red);" onclick="clearTodos()">WIPE OBJECTIVES</button>
        </div>
    </div>

    <script>
        // HANDLE: VarshiniAshok
        const USERNAME = "VarshiniAshok"; 

        // 1. Clock Logic
        function updateClock() {
            const n = new Date();
            document.getElementById('clock').textContent = n.toLocaleTimeString([], {hour12: false});
            document.getElementById('date').textContent = "COMMANDER VARSHINI | " + n.toLocaleDateString(undefined, {weekday:'short', month:'short', day:'numeric'}).toUpperCase();
        }
        setInterval(updateClock, 1000);

        // 2. LeetCode API Sync
        async function initDashboard() {
            try {
                const res = await fetch(`https://alfa-leetcode-api.onrender.com/${USERNAME}/solved`);
                const data = await res.json();
                document.getElementById('total-solved').innerText = data.solvedProblem || 0;
                document.getElementById('easy-count').innerText = data.easySolved || 0;
                document.getElementById('med-count').innerText = data.mediumSolved || 0;
                document.getElementById('hard-count').innerText = data.hardSolved || 0;
            } catch (e) { 
                document.getElementById('total-solved').innerText = "OFFLINE";
            }
        }

        // 3. Timer & Zen Mode Logic
        let timeLeft = 1500; let timer = null;
        function setTimer(m, b) {
            clearInterval(timer); timer = null;
            timeLeft = m * 60; updateTimerUI();
            document.querySelectorAll('.t-btn').forEach(btn => btn.classList.remove('active'));
            b.classList.add('active');
            document.body.classList.remove('zen-mode');
            document.getElementById('start-btn').innerText = "START SESSION";
        }
        function updateTimerUI() {
            const m = Math.floor(timeLeft/60); const s = timeLeft%60;
            document.getElementById('timer-display').innerText = `${m}:${s<10?'0':''}${s}`;
        }
        function toggleTimer() {
            if(timer) {
                clearInterval(timer); timer = null;
                document.getElementById('start-btn').innerText = "RESUME";
                document.body.classList.remove('zen-mode');
            } else {
                document.body.classList.add('zen-mode');
                timer = setInterval(() => {
                    if(timeLeft > 0) { timeLeft--; updateTimerUI(); }
                    else { clearInterval(timer); document.body.classList.remove('zen-mode'); alert("Phase Complete."); }
                }, 1000);
                document.getElementById('start-btn').innerText = "PAUSE";
            }
        }

        // 4. Persistence Tasks
        let todos = JSON.parse(localStorage.getItem('focus_tasks')) || [];
        function renderTodos() {
            document.getElementById('todo-list').innerHTML = todos.map((t, i) => `
                <div class="todo-item">
                    <input type="checkbox" ${t.done ? 'checked' : ''} onchange="toggleDone(${i})">
                    <span class="${t.done ? 'done' : ''}" style="flex:1;">${t.text}</span>
                    <span onclick="deleteTask(${i})" style="color:var(--warning-red); font-weight:900; padding: 0 10px;">âœ•</span>
                </div>
            `).join('');
            localStorage.setItem('focus_tasks', JSON.stringify(todos));
        }
        function addTodo() {
            const input = document.getElementById('todo-input');
            if(input.value.trim()) {
                todos.push({ text: input.value, done: false });
                input.value = ''; renderTodos();
            }
        }
        function toggleDone(i) { todos[i].done = !todos[i].done; renderTodos(); }
        function deleteTask(i) { todos.splice(i, 1); renderTodos(); }
        function clearTodos() { if(confirm("Wipe all objectives?")) { todos = []; renderTodos(); } }

        // Boot system
        updateClock(); initDashboard(); renderTodos();
    </script>
</body>
</html>
